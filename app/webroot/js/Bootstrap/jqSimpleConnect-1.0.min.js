
jqSimpleConnect=new Object();jqSimpleConnect._idGenerator=0;jqSimpleConnect._connections=new Object();jqSimpleConnect._positionConnection=function(c){var e=c.elementA;var d=c.elementB;var b=c.elementA.offset();var a=c.elementB.offset();var j=e.getRealDimensions().width;var i=d.getRealDimensions().width;if(c.container!="body"){var m=$(c.container).css("padding-left").replace("px","");b.top=b.top+$(c.container).scrollTop();a.top=a.top+$(c.container).scrollTop()}if(e.width()>j+10){b.left=b.left+parseInt(j/4);var k=e.height()/2;b.top=b.top+parseInt(k+(k/2),10)}else{b.left=b.left+parseInt(e.width()/2,10);b.top=b.top+parseInt(e.height()/2,10)}if(d.width()>i+10){a.left=a.left+parseInt(i/4);var k=d.height()/2;a.top=a.top+parseInt(k+(k/2),10)}else{a.left=a.left+parseInt(d.width()/2,10);a.top=a.top+parseInt(d.height()/2,10)}var p=jQuery("#"+c.id+"_1").addClass("line1");var o=jQuery("#"+c.id+"_2");var l=jQuery("#"+c.id+"_3");if(b.top==a.top){var g="inline_"+e.attr("data-id");b.top=b.top+(10*($("."+g).length));a.top=a.top+(10*($("."+g).length));p.addClass(g)}if(b.left==a.left){p.show();o.hide();l.hide();if(b.left==a.left){jqSimpleConnect._positionVerticalLine(p,b,a,c.radius,c.roundedCorners)}else{jqSimpleConnect._positionHorizontalLine(p,b,a,c.radius,c.roundedCorners)}}else{if(c.anchorA!=c.anchorB){p.show();o.show();l.hide();var n=new Object();if(c.anchorA=="vertical"){n.left=b.left;n.top=a.top;jqSimpleConnect._positionVerticalLine(p,b,n,c.radius,c.roundedCorners);jqSimpleConnect._positionHorizontalLine(o,a,n,c.radius,c.roundedCorners)}else{n.left=a.left;n.top=b.top;jqSimpleConnect._positionVerticalLine(p,a,n,c.radius,c.roundedCorners);jqSimpleConnect._positionHorizontalLine(o,b,n,c.radius,c.roundedCorners)}}else{p.show();o.show();l.show();var h=new Object();var f=new Object();if(c.anchorA=="vertical"){h.top=parseInt((b.top+a.top)/2,10);f.top=h.top;h.left=b.left;f.left=a.left;jqSimpleConnect._positionVerticalLine(p,b,h,c.radius,c.roundedCorners);jqSimpleConnect._positionVerticalLine(o,a,f,c.radius,c.roundedCorners);jqSimpleConnect._positionHorizontalLine(l,h,f,c.radius,c.roundedCorners)}else{h.left=parseInt((b.left+a.left)/2,10);f.left=h.left;h.top=b.top;f.top=a.top;jqSimpleConnect._positionHorizontalLine(p,b,h,c.radius,c.roundedCorners);jqSimpleConnect._positionHorizontalLine(o,a,f,c.radius,c.roundedCorners);jqSimpleConnect._positionVerticalLine(l,h,f,c.radius,c.roundedCorners)}}}};jqSimpleConnect._positionVerticalLine=function(e,d,c,b,f){var a=parseInt(b/2,10);e.css("left",d.left-a);e.css("top",((d.top>c.top)?(c.top-a):(d.top-a)));e.css("width",b+"px");e.css("height",((d.top>c.top)?(d.top-c.top+b):(c.top-d.top+b))+"px")};jqSimpleConnect._positionHorizontalLine=function(e,d,c,b,f){var a=parseInt(b/2,10);e.css("top",d.top-a);e.css("left",((d.left>c.left)?(c.left-a):(d.left-a)));e.css("height",b+"px");e.css("width",((d.left>c.left)?(d.left-c.left+b):(c.left-d.left+b))+"px")};jqSimpleConnect.connect=function(c,a,d){if(c==null||jQuery(c).size()==0||a==null||jQuery(a).size()==0){return null}c=jQuery(c);if(c.size()>1){c=c.first()}a=jQuery(a);if(a.size()>1){a=a.first()}var b=new Object();b.id="jqSimpleConnect_"+jqSimpleConnect._idGenerator++;b.elementA=c;b.elementB=a;b.color=(d!=null&&d.color!=null)?d.color+"":"#808080";b.radius=(d!=null&&d.radius!=null&&!isNaN(d.radius))?parseInt(d.radius,10):5;b.anchorA=(d!=null&&d.anchorA!=null&&(d.anchorA=="vertical"||d.anchorA=="horizontal"))?d.anchorA:"horizontal";b.anchorB=(d!=null&&d.anchorB!=null&&(d.anchorB=="vertical"||d.anchorB=="horizontal"))?d.anchorB:"horizontal";b.roundedCorners=d!=null&&d.roundedCorners!=null&&(d.roundedCorners==true||d.roundedCorners=="true");b.container=(d!=null&&d.color!=null)?d.container+"":"body";jqSimpleConnect._connections[b.id]=b;var e='<div id="divUniqueIdentifier" class="jqSimpleConnect '+b.id+'" style="width:'+b.radius+"px; height:"+b.radius+"px; background-color:"+b.color+"; "+(b.roundedCorners?"border-radius:"+parseInt(b.radius/2,10)+"px; -webkit-border-radius:"+parseInt(b.radius/2,10)+"px; -moz-border-radius:"+parseInt(b.radius/2,10)+"px; ":"")+'position:absolute;"></div>';jQuery(b.container).prepend(e.replace("divUniqueIdentifier",b.id+"_1"));jQuery(b.container).prepend(e.replace("divUniqueIdentifier",b.id+"_2"));jQuery(b.container).prepend(e.replace("divUniqueIdentifier",b.id+"_3"));jqSimpleConnect._positionConnection(b);return b.id};jqSimpleConnect.repaintConnection=function(b){var a=jqSimpleConnect._connections[b];if(a!=null){jqSimpleConnect._positionConnection(a);return true}return false};jqSimpleConnect.repaintAll=function(){for(var a in jqSimpleConnect._connections){jqSimpleConnect._positionConnection(jqSimpleConnect._connections[a])}};jqSimpleConnect.removeConnection=function(a){if(jqSimpleConnect._connections[a]!=null){jQuery(".jqSimpleConnect."+a).remove();jqSimpleConnect._connections[a]=null;delete jqSimpleConnect._connections[a];return true}return false};jqSimpleConnect.removeAll=function(){jQuery(".jqSimpleConnect").remove();for(var a in jqSimpleConnect._connections){jqSimpleConnect._connections[a]=null;delete jqSimpleConnect._connections[a]}};